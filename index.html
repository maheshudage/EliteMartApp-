<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Elite-Mart</title>

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

<style>
.qty-label {
	font-size: 14px;
	margin-right: 6px;
}

.qty-dropdown {
	padding: 6px 10px;
	border-radius: 8px;
	border: 1px solid #d5d9d9;
	background: #f0f2f2;
	font-size: 14px;
	cursor: pointer;
}

.qty-dropdown:focus {
	outline: none;
	box-shadow: 0 0 0 2px #ffd814;
}

a {
	color: inherit;
	text-decoration: none;
}
</style>
</head>

<body>

<br>
<!-- Message placeholder -->
<p id="msg"></p>
<br>

<div class="container mt-4">
	<div class="row row-cols-1 row-cols-md-4 g-4">

		<!-- PRODUCT CARD (repeat using JS) -->
		<div class="col">
			<div class="card h-100 shadow-sm">

				<!-- Product Image -->
				<a href="/products/1">
					<img src="https://via.placeholder.com/300x200"
						class="card-img-top" alt="Product Name" height="200">
				</a>

				<div class="card-body d-flex flex-column">

					<!-- Product Details -->
					<a href="/products/1" class="text-dark">
						<h6 class="card-title">Product Name</h6>
						<p class="card-text text-success fw-bold">â‚¹ 999</p>
						<p class="text-success">In Stock</p>
						<p class="text-muted mb-2" style="font-size: 14px;">
							<span class="text-success fw-bold">FREE delivery</span> by
							<strong>20 Jan 2026</strong>
						</p>
					</a>

					<div class="mt-auto">

						<!-- Quantity -->
						<label class="qty-label">Quantity:</label>
						<select class="qty-dropdown qtySelect w-100 mb-3">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
						</select>

						<!-- Add to Cart -->
						<form action="/cart/add/1" method="post" class="mb-2">
							<input type="hidden" name="quantity" class="cartQty">
							<button type="submit" class="btn btn-warning w-100">
								Add to Cart
							</button>
						</form>

						<!-- Buy Now -->
						<form class="buyForm" data-product-id="1" method="post">
							<button type="submit" class="btn btn-danger w-100">
								Buy Now
							</button>
						</form>

					</div>
				</div>
			</div>
		</div>
		<!-- END PRODUCT CARD -->

	</div>
</div>

<script>
document.querySelectorAll('.qtySelect').forEach((select) => {
	const card = select.closest('.card-body');
	const cartForm = card.querySelector('form[action^="/cart/add"]');
	const buyForm = card.querySelector('.buyForm');
	const productId = buyForm.dataset.productId;

	cartForm.querySelector('.cartQty').value = select.value;
	buyForm.action = "/order/buy/" + productId + "/" + select.value;

	select.addEventListener('change', function () {
		cartForm.querySelector('.cartQty').value = this.value;
		buyForm.action = "/order/buy/" + productId + "/" + this.value;
	});
});
</script>

</body>
</html>
